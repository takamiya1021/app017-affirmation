# アファメーションアプリ 実装計画書

## 🎯 実装フェーズ概要

| フェーズ | 内容 | 予定工数 | 成果物 |
|---------|------|---------|--------|
| Phase 0 | データ収集・準備 | 4時間 | アファメーション100個以上のJSONデータ |
| Phase 1 | 環境構築 | 2時間 | Next.js プロジェクト初期化 |
| Phase 2 | データ・サービス層 | 6時間 | データモデル・ローカルストレージ実装 |
| Phase 3 | UIコンポーネント | 8時間 | 再利用可能コンポーネント群 |
| Phase 4 | ページ・機能実装 | 10時間 | 全ページと主要機能 |
| Phase 5 | PWA・テーマ対応 | 4時間 | PWA化・マルチテーマ |
| Phase 6 | テスト・デプロイ | 2時間 | 本番環境デプロイ |

**総予定工数: 36時間**

---

## 📊 Phase 0: データ収集・準備（予定工数: 4時間）

### 🎯 目標
- 最低100個のクオリティの高いアファメーション収集
- テーマ・シーン・年代別の適切な分類
- JSON形式でのデータ構造化

### ✅ タスクリスト

#### アファメーション収集（3時間）
- [x] **一般的なアファメーション収集** (1時間)
  - Web検索で基本的なアファメーション50個
  - 自信・愛・成功・健康の各テーマから均等に収集
- [x] **著名人格言収集** (1時間)
  - ドクター・ディマティーニの言葉収集
  - その他著名人（スティーブ・ジョブズ、オプラ・ウィンフリー等）
  - 英語原文+日本語訳で記録
- [x] **年代・シーン別アファメーション収集** (1時間)
  - 20-70代向けの年代特化メッセージ
  - 朝・夜・仕事シーン向けメッセージ

#### データ構造化（1時間）
- [x] **JSONスキーマ作成**
  - TypeScript型定義に基づいたスキーマ設計
- [x] **収集データのJSON化**
  - 全アファメーションを構造化データに変換
  - カテゴリ分類・メタデータ付与
- [x] **データ品質確認**
  - 重複チェック・カテゴリ分散確認

---

## 🏗️ Phase 1: 環境構築（予定工数: 2時間）

### 🎯 目標
- Next.js 15 + TypeScript + Tailwind CSS環境の構築
- PWA対応基盤の準備

### ✅ タスクリスト

#### プロジェクト初期化（1時間）
- [x] **Next.js プロジェクト作成**
  ```bash
  npx create-next-app@latest app017-affirmation --typescript --tailwind --eslint --app
  ```
- [x] **追加パッケージインストール**
  - next-pwa: PWA対応
  - framer-motion: アニメーション
  - lucide-react: アイコン
- [x] **基本設定ファイル**
  - tailwind.config.js カスタマイズ
  - next.config.js PWA設定

#### 開発環境整備（1時間）
- [x] **TypeScript設定**
  - 厳密な型チェック設定
  - パスエイリアス設定（@/* → src/*）
- [x] **ESLint・Prettier設定**
  - コード品質ルール設定
- [x] **フォルダ構造作成**
  - src/配下の基本フォルダ構成
  - doc/、screenshots/フォルダ作成

---

## 💾 Phase 2: データ・サービス層（予定工数: 6時間）

### 🎯 目標
- データモデルの実装
- ローカルストレージサービス
- アファメーション管理サービス

### ✅ タスクリスト

#### TypeScript型定義（1時間）
- [x] **基本型定義** (`src/types/index.ts`)
  - Affirmation インターフェース
  - UserSettings インターフェース
  - UserActivity インターフェース
- [x] **カテゴリ型定義**
  - ThemeCategory, SceneCategory, AgeGroup
- [x] **ユーティリティ型**
  - APIレスポンス型、エラー型等

#### ローカルストレージサービス（2時間）
- [x] **ストレージユーティリティ** (`src/lib/storage.ts`)
  - localStorage の型安全ラッパー
  - IndexedDB 操作ユーティリティ
  - エラーハンドリング
- [x] **データマイグレーション**
  - バージョン管理システム
  - 既存データの互換性確保

#### アファメーション管理サービス（2時間）
- [x] **アファメーションサービス** (`src/lib/affirmationService.ts`)
  - アファメーション初期化・読み込み
  - フィルタリング・検索機能
  - ランダム選択・特別メッセージ選択
- [x] **ユーザーサービス** (`src/lib/userService.ts`)
  - 設定管理（年齢、テーマ、カラー）
  - お気に入り・いいね管理
  - ユーザー追加アファメーション管理

#### React Hooks（1時間）
- [x] **カスタムフック** (`src/hooks/`)
  - useAffirmations: アファメーション状態管理
  - useUserSettings: ユーザー設定管理
  - useLocalStorage: ローカルストレージ操作

---

## 🎨 Phase 3: UIコンポーネント（予定工数: 8時間）

### 🎯 目標
- 再利用可能UIコンポーネント群
- テーマシステム対応コンポーネント

### ✅ タスクリスト

#### 基本UIコンポーネント（3時間）
- [x] **ボタンコンポーネント** (`src/components/ui/Button.tsx`)
  - プライマリ・セカンダリ・テキストボタン
  - サイズバリエーション・ローディング状態
- [x] **ユーティリティ関数** (`src/lib/utils.ts`)
  - クラス名マージ・日付フォーマット・文字列操作等
- [x] **入力コンポーネント** (`src/components/ui/Input.tsx`)
  - テキスト入力・選択ボックス
  - バリデーション表示・エラー状態

#### アファメーション関連コンポーネント（3時間）
- [x] **アファメーション表示** (`src/components/affirmation/AffirmationCard.tsx`)
  - メインテキスト・著者表示
  - いいねボタン・お気に入りボタン
  - 英語原文切り替え
- [x] **アファメーションリスト** (`src/components/affirmation/AffirmationList.tsx`)
  - 一覧表示・仮想化対応
  - フィルタリング・検索結果表示
- [x] **フィルター** (`src/components/affirmation/FilterBar.tsx`)
  - カテゴリ選択・年代選択
  - クリア・適用ボタン

#### レイアウトコンポーネント（2時間）
- [x] **ヘッダー** (`src/components/layout/Header.tsx`)
  - アプリタイトル・ナビゲーション
  - 設定ボタン・ダークモード切替
- [x] **ナビゲーション** (`src/components/layout/Navigation.tsx`)
  - タブナビゲーション・アクティブ状態
- [x] **ローディング** (`src/components/ui/Loading.tsx`)
  - スピナー・スケルトンローディング

---

## 📱 Phase 4: ページ・機能実装（予定工数: 10時間）

### 🎯 目標
- 全ページの実装
- 主要機能の完全実装

### ✅ タスクリスト

#### メインページ（3時間）
- [x] **ホームページ** (`src/app/page.tsx`)
  - ランダムアファメーション表示
  - いいね・お気に入り機能
  - 新しいアファメーション取得
- [x] **今日の特別なメッセージ** (`src/app/daily-special/page.tsx`)
  - ユーザー好み分析
  - 特別メッセージ表示
  - 履歴表示

#### カテゴリ・検索機能（2時間）
- [x] **カテゴリ選択** (`src/app/categories/page.tsx`)
  - テーマ・シーン・年代別表示
  - フィルタ適用・結果表示
- [x] **検索機能** (categoriesページに統合)
  - キーワード検索・履歴保存
  - 検索結果一覧・ソート機能

#### ユーザー機能（3時間）
- [x] **お気に入り** (`src/app/favorites/page.tsx`)
  - お気に入り一覧表示
  - 削除・並び替え機能
- [x] **アファメーション追加** (`src/app/add-affirmation/page.tsx`)
  - ユーザー投稿フォーム
  - カテゴリ選択・プレビュー
  - バリデーション・保存処理

#### 設定画面（2時間）
- [x] **設定メイン** (`src/app/settings/page.tsx`)
  - 年齢設定・デザインテーマ選択
  - カラーテーマ・ダークモード
  - 言語設定・通知設定

---

## 🌍 Phase 5: PWA・テーマ対応（予定工数: 4時間）

### 🎯 目標
- PWA化完了
- マルチテーマ・ダークモード実装

### ✅ タスクリスト

#### PWA設定（2時間）
- [x] **マニフェスト設定** (`public/manifest.json`)
  - アプリ名・説明・アイコン設定
  - ディスプレイモード・オリエンテーション
- [x] **サービスワーカー** (next-pwa自動生成)
  - オフラインキャッシュ戦略
  - 静的リソース・動的コンテンツ対応
- [x] **アイコン生成** (`public/icons/`)
  - SVGアイコン作成（開発用）
  - PWAメタデータ設定完了

#### テーマシステム（2時間）
- [x] **テーマプロバイダー** (`src/context/ThemeContext.tsx`)
  - デザインテーマ管理
  - カラーテーマ管理・切り替え
- [x] **ダークモード**
  - システム設定連動
  - 手動切り替え・状態保持
- [x] **CSS変数システム**
  - テーマ別CSS変数定義
  - Tailwind CSS連携

---

## 🧪 Phase 6: テスト・デプロイ（予定工数: 2時間）

### 🎯 目標
- 品質確保・本番デプロイ

### ✅ タスクリスト

#### 品質確認（1時間）
- [ ] **機能テスト**
  - 全ページ動作確認
  - オフライン動作テスト
  - PWA インストールテスト
- [ ] **レスポンシブテスト**
  - iPhone, Android 各種サイズ
  - タブレット・デスクトップ確認
- [ ] **ブラウザ互換性テスト**
  - Chrome, Safari, Firefox 動作確認

#### デプロイ（1時間）
- [ ] **ビルド最適化**
  - プロダクションビルド実行
  - バンドルサイズ確認・最適化
- [ ] **Vercel デプロイ**
  - 本番環境デプロイ
  - ドメイン設定・HTTPS確認
- [ ] **最終動作確認**
  - 本番環境での動作テスト
  - PWA インストール確認

---

## 🎯 マイルストーン

| マイルストーン | 達成条件 | 期限目標 |
|---------------|----------|----------|
| **Alpha版完成** | Phase 0-2 完了、基本データ・サービス実装 | 1週間後 |
| **Beta版完成** | Phase 3-4 完了、全機能実装完了 | 2週間後 |
| **製品版リリース** | Phase 5-6 完了、PWA対応・デプロイ完了 | 3週間後 |

## 🚨 リスク・課題

### 技術的リスク
- **データ量**: 100個のアファメーションがアプリサイズに与える影響
- **PWA対応**: iOS Safariでの制限・挙動確認
- **パフォーマンス**: 大量データのフィルタリング処理速度

### 対策
- **データ圧縮**: JSON最小化・gzip圧縮
- **段階読み込み**: 初期ロード時は最小データ、順次拡張
- **インデックス**: 検索・フィルタリング高速化

## 📈 成功指標

### 技術的指標
- [ ] **Lighthouse スコア**: 90点以上（全項目）
- [ ] **ページロード時間**: 2秒以内
- [ ] **オフライン動作**: 100%の機能がオフライン利用可能
- [ ] **クロスブラウザ**: Chrome, Safari, Firefox で正常動作

### 機能的指標
- [ ] **アファメーション数**: 100個以上
- [ ] **カテゴリ分類**: 全アファメーションが適切に分類済み
- [ ] **PWA機能**: ホーム画面追加・オフライン動作完璧
- [ ] **レスポンシブ**: 全デバイスサイズで快適操作可能